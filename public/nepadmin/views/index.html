<link rel="stylesheet" href="/public/nepadmin/css/admin.css">
<link rel="stylesheet" href="/public/nepadmin/static/css/login.css">
<div class="layui-fluid" id="VIEW-index" lay-title="数据面板">
  <style>  .layui-table-cell {  padding: 0 5px;  }
  .rank .title{font-family:Microsoft YaHei;font-weight: bold;font-size: 18px;color: #333333;margin-top: 20px;margin-bottom: 20px}
  .rank .title i{color:#FB4D00;font-size:16px; }
  .rank .row {height: 50px;width:100%;position: relative;align-items: center;}
  .rank .row .sort {float: left;line-height: 50px;color:#888888;width: 40px; text-align:center; font-size: 20px;font-weight: bold}
  .rank .row .sort img {width: 30px}
  .rank .row  .row_img {margin-top:10px;border-radius:32px;width: 32px;height: 32px;float: left;}
  .rank .row  .row_title {float: left;line-height: 50px;padding-left: 10px;font-weight: bold;font-size: 14px;color: #555555;font-family:Microsoft YaHei;font-size: 14px;color: #555555;max-width: 140px; overflow: hidden; text-overflow: ellipsis;white-space:nowrap}
  .rank .row  .row_right {float: right;color: #FB4D00;font-size: 15px;text-align: right;}
  .rank .row  .row_right .row_right_title {display:block;color: #FB4D00;font-size: 15px;font-weight: bold }
  .rank .row  .row_right .row_right_title_two {display:block;color: #383838;font-size: 15px;font-weight: bold }
  .rank .row  .row_right .row_right_text {color:#999999;font-size: 12px }


  </style>
  <div class="layui-col-space10">
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-body">
          <blockquote class="layui-elem-quote layui-quote-nm">
            欢迎你：<span id="admin_name"></span> ( <span id="admin_username"></span> )，当前服务器时间：<span id="clock" style="color: red"></span>
          </blockquote>
        </div>
      </div>
    </div>
    <div class="layui-row layui-col-space10" id="data_contents">
      <!--      <div class="layui-col-xs3 layui-col-md3">-->
      <!--        <div class="layui-card" >-->
      <!--          <div class="layui-card-header" style="display: flex;justify-content: space-between">-->
      <!--            <p>激活客户数量</p>-->
      <!--            <p><span class="layui-badge layui-bg-blue">今日</span></p>-->
      <!--          </div>-->
      <!--          <div class="layui-card-body">-->
      <!--            <p class="nepadmin-linecard-text" style="color: #6192FE;margin: 20px 0">58</p>-->
      <!--            <div style="display: flex;justify-content: space-between">-->
      <!--              <p>总激活客户数量</p>-->
      <!--              <p>2480人</p>-->
      <!--            </div>-->
      <!--          </div>-->
      <!--        </div>-->
      <!--      </div>-->

    </div>


  </div>



</div>


<script>
  layui.use(['admin', 'echarts', 'element', 'helper', 'table', 'util','form', 'siam','laydate','xmSelect'], function(admin, echarts, element, helper, table, util,form) {
    var $ = layui.jquery,laydate=layui.laydate
    var view = $('#VIEW-index');
    var siam = layui.siam;
    var form = layui.form;
    var xmSelect = layui.xmSelect;
    var reseller_id = start_date = end_date = type= '';
    var map_name='中国';
    var option
    $('#admin_name').text(admin.data()['realname']);
    $('#admin_username').text(admin.data()['username']);
    console.log(admin.data()['username'])
    // updateClock();

    //加载数据
    function loadData(){
      dataTotal();;

    }
    //加载数据
    loadData();
    //顶部数据统计
    function dataTotal(){
      admin.post({
        api: 'ChartGetTopData',
        data:{'reseller_id':reseller_id,"start_date":start_date, "end_date":end_date, "type":type},
        async: false,
        success:function (res) {
          // 更新显示时间的元素
          $('#clock').text(res.result[0]['date_time']);
          var data = res.result;
          layui.each(data,function (index,item) {
            var html = '  <div class="layui-col-xs3 layui-col-md3">\n' +
                    '        <div class="layui-card" >\n' +
                    '          <div class="layui-card-header" style="display: flex;justify-content: space-between">\n' +
                    '            <p>'+item.header_left+'</p>\n' +
                    '            <p><span class="layui-badge layui-bg-blue">'+item.header_right+'</span></p>\n' +
                    '          </div>\n' +
                    '          <div class="layui-card-body">\n' +
                    '            <p class="nepadmin-linecard-text" style="color: #6192FE;margin: 20px 0">'+item.value+'</p>\n' +
                    '            <div style="display: flex;justify-content: space-between;height: 20px;">\n' +
                    '              <p>'+item.footer_left+'</p>\n' +
                    '              <p>'+item.footer_right+'</p>\n' +
                    '            </div>\n' +
                    '          </div>\n' +
                    '        </div>\n' +
                    '      </div>';
            $('#data_contents').append(html);
          })
        }
      });
    }

    //时间实时展示
    function updateClock() {
      var now = new Date(); // 获取当前时间
      var year = now.getFullYear(); // 年
      var month = now.getMonth()+1; // 月
      var day = now.getDate(); // 日
      var hours = now.getHours(); // 小时
      var minutes = now.getMinutes(); // 分钟
      var seconds = now.getSeconds(); // 秒钟

      // 补零操作
      hours = hours < 10 ? "0" + hours : hours;
      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;

      // 构建时间格式
      var timeStr = year+'-'+month+'-'+day+' '+ hours + ":" + minutes + ":" + seconds;

      // 更新显示时间的元素
      $('#clock').text(timeStr);

      // 递归调用实现实时更新
      setTimeout(updateClock, 1000);
    }

  })
</script>
